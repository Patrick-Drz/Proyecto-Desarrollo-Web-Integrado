<div class="container-fluid p-4">
  <h2 class="mb-4">Gestión de Productos del Menú</h2>

  <div class="card mb-4">
    <div class="card-header bg-primary text-white">
      {{ editMode ? 'Editar Producto' : 'Añadir Nuevo Producto' }}
    </div>
    <div class="card-body">
      <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
        <div class="mb-3">
          <label class="form-label">Código del Producto:</label>
          <input type="text" class="form-control" formControlName="codigoProducto">
        </div>
        <div class="mb-3">
          <label class="form-label">Nombre:</label>
          <input type="text" class="form-control" formControlName="nombre">
        </div>
        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label">Precio:</label>
            <input type="number" class="form-control" formControlName="precio">
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Stock:</label>
            <input type="number" class="form-control" formControlName="stock">
          </div>
        </div>
        <div class="mb-3">
          <label class="form-label">Descripción:</label>
          <textarea class="form-control" rows="3" formControlName="descripcion"></textarea>
        </div>
        <div class="mb-3">
          <label class="form-label">Imagen URL:</label>
          <input type="text" class="form-control" formControlName="rutaImagen">
        </div>
        <button type="submit" class="btn btn-success" [disabled]="productForm.invalid">
          {{ editMode ? 'Actualizar Producto' : 'Añadir Producto' }}
        </button>
        <button type="button" class="btn btn-secondary ms-2" *ngIf="editMode" (click)="cancelEdit()">Cancelar</button>
      </form>
    </div>
  </div>

  <div class="card">
    <div class="card-header bg-info text-white">Lista de Productos</div>
    <div class="card-body p-0">
      <table class="table table-striped table-hover mb-0 align-middle">
        <thead>
          <tr>
            <th>Imagen</th>
            <th>ID</th>
            <th>Código</th>
            <th>Nombre</th>
            <th>Precio</th>
            <th>Stock</th>
            <th>Descripción</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let producto of productos">
            <td><img [src]="producto.rutaImagen" width="50" height="50" class="rounded" style="object-fit: cover;"></td>
            <td>{{producto.id}}</td>
            <td>{{producto.codigoProducto}}</td>
            <td>{{producto.nombre}}</td>
            <td>S/ {{producto.precio | number:'1.2-2'}}</td>
            <td>{{producto.stock}}</td>
            <td><small>{{producto.descripcion}}</small></td>
            <td>
              <button class="btn btn-warning btn-sm me-2" (click)="cargarProducto(producto)">Modificar</button>
              <button class="btn btn-danger btn-sm" (click)="eliminarProducto(producto.id)">Eliminar</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
